<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christmas Pattern Generator</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/gif.js@0.2.0/dist/gif.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- 탭 네비게이션 -->
        <div class="tab-navigation">
            <button class="tab-btn active" data-tab="pattern-gen">Pattern Generator</button>
            <button class="tab-btn" data-tab="music-motion">Music Motion</button>
        </div>
        
        <!-- Pattern Generator 탭 -->
        <div class="tab-content active" id="pattern-gen-tab">
        <!-- 왼쪽 컨트롤 패널 -->
        <div class="left-panel">
            <h1>Christmas Pattern Generator</h1>
            
            <!-- 상단 버튼들 -->
            <div class="button-group">
                <button id="clearBtn" class="btn">지우기</button>
                <button id="clearAllBtn" class="btn">Clear All</button>
                <button id="saveBtn" class="btn">Save Pattern</button>
                <button id="importBtn" class="btn">Import Pattern</button>
                <button id="recordBtn" class="btn">화면 녹화</button>
            </div>
            
            <!-- 레이어별 저장 -->
            <div class="control-section">
                <h3>레이어별 저장</h3>
                <button id="saveBodyBtn" class="btn" style="width: 100%; margin-bottom: 8px;">Body 저장</button>
                <button id="saveScarfBtn" class="btn" style="width: 100%; margin-bottom: 8px;">Scarf 저장</button>
                <button id="importBodyBtn" class="btn" style="width: 100%; margin-bottom: 8px;">Body 불러오기</button>
                <button id="importScarfBtn" class="btn" style="width: 100%;">Scarf 불러오기</button>
            </div>
            
            <!-- 도구 선택 -->
            <div class="control-section">
                <h3>도구 선택</h3>
                <div class="tool-selection" id="toolSelection">
                    <!-- 도구들은 JavaScript로 동적 생성 -->
                </div>
            </div>
            
            <!-- 프레임 제어 -->
            <div class="control-section">
                <h3>프레임 제어</h3>
                <div class="frame-selector" id="frameSelector">
                    <!-- 프레임 버튼들은 JavaScript로 동적 생성 -->
                </div>
                <div class="play-control" style="margin-top: 12px;">
                    <button id="playBtn" class="play-button">▶</button>
                    <span class="time-display" id="timeDisplay">프레임 1 / 6</span>
                </div>
                <div class="frame-copy-control" style="margin-top: 12px;">
                    <h3 style="margin-bottom: 8px; margin-top: 0;">프레임 복사</h3>
                    <div class="frame-save-buttons" id="frameSaveButtons" style="margin-bottom: 8px;">
                        <!-- 프레임 저장 버튼들은 JavaScript로 동적 생성 -->
                    </div>
                    <button id="importLastSavedBtn" class="btn" style="width: 100%;">최근 저장한 프레임 import</button>
                </div>
                <div class="grid-control" style="margin-top: 12px;">
                    <button id="toggleGridBtn" class="btn">그리드 표시</button>
                </div>
                <div class="background-control" style="margin-top: 12px;">
                    <h3 style="margin-bottom: 8px; margin-top: 0;">배경 이미지</h3>
                    <button id="uploadBgImageBtn" class="btn" style="width: 100%; margin-bottom: 8px;">이미지 업로드</button>
                    <button id="toggleBgImageBtn" class="btn" style="width: 100%; margin-bottom: 8px;">이미지 숨기기</button>
                    <button id="removeBgImageBtn" class="btn" style="width: 100%;">이미지 제거</button>
                </div>
                <div class="gif-control" style="margin-top: 12px;">
                    <button id="saveGifBtn" class="btn">GIF 저장</button>
                </div>
            </div>
        </div>
        
        <!-- 오른쪽 캔버스 -->
        <div class="right-panel">
            <div class="canvas-wrapper">
                <div class="grid-with-numbers">
                    <div class="row-numbers" id="rowNumbers"></div>
                    <div class="grid-container">
                        <div class="col-numbers" id="colNumbers"></div>
                        <div class="canvas-container">
                            <canvas id="gridCanvas"></canvas>
                        </div>
                    </div>
                </div>
                <div class="frame-thumbnails" id="frameThumbnails">
                    <!-- 프레임 썸네일들은 JavaScript로 동적 생성 -->
                </div>
            </div>
        </div>
        </div>
        
        <!-- Music Motion 탭 -->
        <div class="tab-content" id="music-motion-tab">
            <div class="left-panel">
                <h1>Music Motion</h1>
                
                <!-- 음악 파일 업로드 -->
                <div class="control-section">
                    <h3>음악 파일</h3>
                    <button id="uploadMusicMotionBtn" class="btn" style="width: 100%; margin-bottom: 8px;">음악 업로드</button>
                    <div id="musicMotionInfo" style="color: #999; font-size: 12px; margin-top: 8px;"></div>
                </div>
                
                <!-- 걸어가는 프레임 모션 입력 -->
                <div class="control-section">
                    <h3>걸어가는 프레임 모션</h3>
                    <div id="walkingMotionInputs">
                        <div class="motion-input-item" style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 13px;">모션 1:</label>
                            <button class="btn motion-import-btn" data-motion="0" style="width: 100%; margin-bottom: 8px;">모션 1 불러오기</button>
                            <div class="motion-file-name" data-motion="0" style="color: #999; font-size: 12px; margin-top: 4px;"></div>
                            <div style="margin-top: 8px;">
                                <label for="motion0BodyColor" style="display: block; margin-bottom: 4px; color: #e0e0e0; font-size: 12px;">Body 색상:</label>
                                <input type="color" id="motion0BodyColor" data-motion="0" data-type="body" value="#ff3c32" style="width: 100%; height: 32px; border: 1px solid #555; border-radius: 4px; cursor: pointer; background-color: #3a3a3a; margin-bottom: 8px;">
                                <label for="motion0ScarfColor" style="display: block; margin-bottom: 4px; color: #e0e0e0; font-size: 12px;">Scarf 색상:</label>
                                <input type="color" id="motion0ScarfColor" data-motion="0" data-type="scarf" value="#ff3c32" style="width: 100%; height: 32px; border: 1px solid #555; border-radius: 4px; cursor: pointer; background-color: #3a3a3a;">
                            </div>
                        </div>
                        <div class="motion-input-item" style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 13px;">모션 2:</label>
                            <button class="btn motion-import-btn" data-motion="1" style="width: 100%; margin-bottom: 8px;">모션 2 불러오기</button>
                            <div class="motion-file-name" data-motion="1" style="color: #999; font-size: 12px; margin-top: 4px;"></div>
                            <div style="margin-top: 8px;">
                                <label for="motion1BodyColor" style="display: block; margin-bottom: 4px; color: #e0e0e0; font-size: 12px;">Body 색상:</label>
                                <input type="color" id="motion1BodyColor" data-motion="1" data-type="body" value="#ff3c32" style="width: 100%; height: 32px; border: 1px solid #555; border-radius: 4px; cursor: pointer; background-color: #3a3a3a; margin-bottom: 8px;">
                                <label for="motion1ScarfColor" style="display: block; margin-bottom: 4px; color: #e0e0e0; font-size: 12px;">Scarf 색상:</label>
                                <input type="color" id="motion1ScarfColor" data-motion="1" data-type="scarf" value="#ff3c32" style="width: 100%; height: 32px; border: 1px solid #555; border-radius: 4px; cursor: pointer; background-color: #3a3a3a;">
                            </div>
                        </div>
                        <div class="motion-input-item" style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 13px;">모션 3:</label>
                            <button class="btn motion-import-btn" data-motion="2" style="width: 100%; margin-bottom: 8px;">모션 3 불러오기</button>
                            <div class="motion-file-name" data-motion="2" style="color: #999; font-size: 12px; margin-top: 4px;"></div>
                            <div style="margin-top: 8px;">
                                <label for="motion2BodyColor" style="display: block; margin-bottom: 4px; color: #e0e0e0; font-size: 12px;">Body 색상:</label>
                                <input type="color" id="motion2BodyColor" data-motion="2" data-type="body" value="#ff3c32" style="width: 100%; height: 32px; border: 1px solid #555; border-radius: 4px; cursor: pointer; background-color: #3a3a3a; margin-bottom: 8px;">
                                <label for="motion2ScarfColor" style="display: block; margin-bottom: 4px; color: #e0e0e0; font-size: 12px;">Scarf 색상:</label>
                                <input type="color" id="motion2ScarfColor" data-motion="2" data-type="scarf" value="#ff3c32" style="width: 100%; height: 32px; border: 1px solid #555; border-radius: 4px; cursor: pointer; background-color: #3a3a3a;">
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 재생 컨트롤 -->
                <div class="control-section">
                    <h3>재생</h3>
                    <div class="play-control">
                        <button id="musicPlayBtn" class="play-button">▶</button>
                        <span class="time-display" id="musicTimeDisplay">정지</span>
                    </div>
                    <div class="progress-control" style="margin-top: 12px;">
                        <input type="range" id="musicProgressBar" min="0" max="100" value="0" step="0.1" style="width: 100%; cursor: pointer;">
                        <div style="display: flex; justify-content: space-between; margin-top: 4px; font-size: 11px; color: #999;">
                            <span id="musicCurrentTime">0:00</span>
                            <span id="musicTotalTime">0:00</span>
                        </div>
                    </div>
                </div>
                
                <!-- 그리드 제어 -->
                <div class="control-section">
                    <button id="musicToggleGridBtn" class="btn" style="width: 100%; margin-bottom: 12px;">그리드 표시</button>
                    <button id="musicRecordBtn" class="btn" style="width: 100%;">화면 녹화</button>
                </div>
            </div>
            
            <!-- 오른쪽 캔버스 -->
            <div class="right-panel">
                <div class="canvas-wrapper">
                    <div class="grid-with-numbers">
                        <div class="row-numbers" id="musicRowNumbers"></div>
                        <div class="grid-container">
                            <div class="col-numbers" id="musicColNumbers"></div>
                            <div class="canvas-container">
                                <canvas id="musicCanvas"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <input type="file" id="importFile" accept=".json" style="display: none;">
    <input type="file" id="musicFile" accept="audio/*" style="display: none;">
    <input type="file" id="bgImageFile" accept="image/*" style="display: none;">
    <input type="file" id="musicMotionFile" accept="audio/*" style="display: none;">
    <input type="file" id="motionPatternFile" accept=".json" style="display: none;">
    
    <script src="script.js"></script>
</body>
</html>